"use strict";const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){data.photo=fr.result,profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage);const desingLegend=document.querySelector(".js__legend"),contextDesing=document.querySelector(".js__context"),fillLegend=document.querySelector(".js__fill"),contextFill=document.querySelector(".js__form"),shareLegend=document.querySelector(".js__share"),contextShare=document.querySelector(".js__contextshare"),radioButton1=document.querySelector(".js_radio-1"),radioButton2=document.querySelector(".js_radio-2"),radioButton3=document.querySelector(".js_radio-3"),previewContainer=document.querySelector(".js_preview"),errorDatos=document.querySelector(".js__error");function reset(){contextDesing.classList.add("collapsed"),contextFill.classList.add("collapsed"),contextShare.classList.add("collapsed"),desingLegend.children[1].classList.remove("fa-angle-up"),desingLegend.children[1].classList.add("fa-angle-down"),fillLegend.children[1].classList.remove("fa-angle-up"),fillLegend.children[1].classList.add("fa-angle-down"),shareLegend.children[1].classList.remove("fa-angle-up"),shareLegend.children[1].classList.add("fa-angle-down")}function changeIcon(e){e.children[1].classList.contains("fa-angle-down")?(e.children[1].classList.remove("fa-angle-down"),e.children[1].classList.add("fa-angle-up")):(e.children[1].classList.remove("fa-angle-up"),e.children[1].classList.add("fa-angle-down"))}function toogle(e,t,n){e.classList.contains(n)?(reset(),e.classList.remove(n)):e.classList.add(n),changeIcon(t)}function resetPalette(){previewContainer.classList.remove("palette-1"),previewContainer.classList.remove("palette-2"),previewContainer.classList.remove("palette-3")}function handleClickRadioUnique(e){const t="palette-"+e.currentTarget.value;resetPalette(),previewContainer.classList.add(t),data.palette=parseInt(e.currentTarget.value)}desingLegend.addEventListener("click",(function(){event.preventDefault(),toogle(contextDesing,desingLegend,"collapsed")})),fillLegend.addEventListener("click",(function(){event.preventDefault(),toogle(contextFill,fillLegend,"collapsed")})),shareLegend.addEventListener("click",(function(){event.preventDefault(),toogle(contextShare,shareLegend,"collapsed")})),radioButton1.addEventListener("click",handleClickRadioUnique),radioButton2.addEventListener("click",handleClickRadioUnique),radioButton3.addEventListener("click",handleClickRadioUnique);const fillul=document.querySelector(".js__allInputs"),previewNameElement=document.querySelector(".js__preview_name"),previewJobElement=document.querySelector(".js__preview_job"),previewEmailElement=document.querySelector(".js__preview_email"),previewPhoneElement=document.querySelector(".js__preview_phone"),previewLinkedinElement=document.querySelector(".js__preview_linkedin"),previewGithubElement=document.querySelector(".js__preview_github");let data={palette:1,name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""};function renderPreview(){previewNameElement.innerHTML=data.name||"Nombre Apellidos",previewJobElement.innerHTML=data.job||"Front-end developer",""===data.email?(previewEmailElement.href="",previewEmailElement.target=""):(previewEmailElement.href="mailto: "+data.email,previewEmailElement.target="_blank"),""===data.phone?(previewPhoneElement.href="",previewPhoneElement.target=""):(previewPhoneElement.href="https://api.whatsapp.com/send?phone="+data.phone,previewPhoneElement.target="_blank"),""===data.linkedin?(previewLinkedinElement.href="",previewLinkedinElement.target=""):(previewLinkedinElement.href="https://www.linkedin.com/in/"+data.linkedin,previewLinkedinElement.target="_blank"),""===data.github?(previewGithubElement.href="",previewGithubElement.target=""):(previewGithubElement.href="https://github.com/"+data.github,previewGithubElement.target="_blank"),""===data.photo&&(profilePreview.style.backgroundImage="",profileImage.style.backgroundImage="")}function handlekeyupInputs(e){const t=e.target;"name"===t.name?data.name=t.value:"job"===t.name?data.job=t.value:"email"===t.name?data.email=t.value:"phone"===t.name?data.phone=t.value:"linkedin"===t.name?data.linkedin=t.value:"github"===t.name&&(data.github=t.value),renderPreview()}fillul.addEventListener("keyup",handlekeyupInputs),fillul.addEventListener("change",handlekeyupInputs);const btnReset=document.querySelector(".js__btnreset"),form=document.querySelector(".js__resetform");function resetData(){data.palette=1,data.name="",data.job="",data.email="",data.phone="",data.linkedin="",data.github="",data.photo=""}function handleClickReset(e){e.preventDefault(),form.reset(),resetData(),renderPreview(),resetPalette(),errorDatos.innerHTML="",createButton.style.background="#e17334",createButton.disabled=!1,cardShare.classList.remove("js__collapsedshare"),reset()}btnReset.addEventListener("click",handleClickReset);const cardShare=document.querySelector(".js__card"),createButton=document.querySelector(".js_create_button");function handleClickCreateCard(e){e.preventDefault(),console.log(data),errorDatos.innerHTML="",""===data.name||""===data.palette||""===data.job||""===data.photo||""===data.email||""===data.linkedin||""===data.github?errorDatos.innerHTML="Debe rellenar todos los campos":(console.log("Entro en el else"),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{if(console.log(e),createButton.style.background="#d5d5d5",createButton.disabled=!0,cardShare.classList.add("js__collapsedshare"),e.success){const t=document.querySelector(".js-response");t.innerHTML=e.cardURL,t.href=e.cardURL;const n=document.querySelector(".js_twitterShare");let a="https://twitter.com/intent/tweet?text=Mira%20mi%20tarjeta%20profesional&url="+e.cardURL;n.href=a}else{document.querySelector(".js__createcard").innerHTML=e.error}}))}createButton.addEventListener("click",handleClickCreateCard),localStorage.setItem("",JSON.stringify());